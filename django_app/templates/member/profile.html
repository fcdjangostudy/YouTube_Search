{% extends 'common/base.html' %}

{% block content %}
    <div><h1>{{ cur_user }}의 프로필</h1></div>
    <div>
        <h2>{{ cur_user }}가 팔로워 하는 사람</h2>
        <ul>
            {% for u in cur_user.following %}
                <li><a href="{% url 'member:profile' user_pk=u.pk %}">
                    <button>{{ u }}</button>
                </a></li>
            {% endfor %}
        </ul>
    </div>
    <div>
        <h2>{{ cur_user }}를 팔로우 하는 사람</h2>
        <ul>
            {% for u in cur_user.follower %}
                <li><a href="{% url 'member:profile' user_pk=u.pk %}">
                    <button>{{ u }}</button>
                </a></li>
            {% endfor %}
        </ul>
    </div>
    {% if user != cur_user %}
        <form action="{% url 'member:profile' user_pk=cur_user.pk %}" method="POST">
        {% csrf_token %}
            {% if cur_user in user.following %}
                <div>현재 유저 : {{ user }} 님은 {{ cur_user }}를 팔로우 하는 중입니다.</div>
                <button type="submit">팔로우해제</button>
            {% else %}
                <div>현재 유저 : {{ user }} 님은 {{ cur_user }}를 팔로우 하는 중이 아닙니다.</div>
                <button type="submit">팔로우하기</button>
            {% endif %}
        </form>
    {% endif %}

{% endblock %}